const router = require("express").Router();
const axios = require("axios");
router.get("/fetch_datasets", async (req, res) => {
  const response = await axios.post(
    "https://demo.datahubproject.io/api/v2/graphql",
    {
      operationName: "getSearchResultsForMultiple",
      variables: {
        input: {
          types: [],
          query: "Datasets",
          start: 0,
          count: 10,
          filters: [],
          orFilters: [
            {
              and: [
                {
                  field: "_entityType",
                  condition: "EQUAL",
                  values: ["DATASET"],
                  negated: false,
                },
              ],
            },
          ],
        },
      },
      query:
        'query getSearchResultsForMultiple($input: SearchAcrossEntitiesInput!) {\n  searchAcrossEntities(input: $input) {\n    ...searchResults\n    __typename\n  }\n}\n\nfragment searchResults on SearchResults {\n  start\n  count\n  total\n  searchResults {\n    entity {\n      ...searchResultFields\n      __typename\n    }\n    matchedFields {\n      name\n      value\n      __typename\n    }\n    insights {\n      text\n      icon\n      __typename\n    }\n    __typename\n  }\n  facets {\n    ...facetFields\n    __typename\n  }\n  __typename\n}\n\nfragment searchResultFields on Entity {\n  urn\n  type\n  ... on Dataset {\n    name\n    origin\n    uri\n    platform {\n      ...platformFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    platformNativeType\n    properties {\n      name\n      description\n      qualifiedName\n      customProperties {\n        key\n        value\n        __typename\n      }\n      externalUrl\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    globalTags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    subTypes {\n      typeNames\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    ...entityDataProduct\n    parentContainers {\n      ...parentContainersFields\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    siblings {\n      isPrimary\n      siblings {\n        urn\n        type\n        ... on Dataset {\n          platform {\n            ...platformFields\n            __typename\n          }\n          name\n          properties {\n            name\n            description\n            qualifiedName\n            externalUrl\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    ...datasetStatsFields\n    __typename\n  }\n  ... on CorpUser {\n    username\n    properties {\n      active\n      displayName\n      title\n      firstName\n      lastName\n      fullName\n      email\n      __typename\n    }\n    info {\n      active\n      displayName\n      title\n      firstName\n      lastName\n      fullName\n      email\n      __typename\n    }\n    editableProperties {\n      displayName\n      title\n      pictureLink\n      __typename\n    }\n    __typename\n  }\n  ... on CorpGroup {\n    name\n    info {\n      displayName\n      description\n      __typename\n    }\n    memberCount: relationships(\n      input: {types: ["IsMemberOfGroup", "IsMemberOfNativeGroup"], direction: INCOMING, start: 0, count: 1}\n    ) {\n      total\n      __typename\n    }\n    __typename\n  }\n  ... on Dashboard {\n    dashboardId\n    properties {\n      name\n      description\n      externalUrl\n      access\n      lastModified {\n        time\n        __typename\n      }\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    globalTags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    ...entityDataProduct\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    parentContainers {\n      ...parentContainersFields\n      __typename\n    }\n    statsSummary {\n      viewCount\n      uniqueUserCountLast30Days\n      topUsersLast30Days {\n        urn\n        type\n        username\n        properties {\n          displayName\n          firstName\n          lastName\n          fullName\n          __typename\n        }\n        editableProperties {\n          displayName\n          pictureLink\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    subTypes {\n      typeNames\n      __typename\n    }\n    __typename\n  }\n  ... on Chart {\n    chartId\n    properties {\n      name\n      description\n      externalUrl\n      type\n      access\n      lastModified {\n        time\n        __typename\n      }\n      created {\n        time\n        __typename\n      }\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    globalTags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    ...entityDataProduct\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    parentContainers {\n      ...parentContainersFields\n      __typename\n    }\n    statsSummary {\n      viewCount\n      uniqueUserCountLast30Days\n      topUsersLast30Days {\n        urn\n        type\n        username\n        properties {\n          displayName\n          firstName\n          lastName\n          fullName\n          __typename\n        }\n        editableProperties {\n          displayName\n          pictureLink\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  ... on DataFlow {\n    flowId\n    cluster\n    properties {\n      name\n      description\n      project\n      externalUrl\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    globalTags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    ...entityDataProduct\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    childJobs: relationships(\n      input: {types: ["IsPartOf"], direction: INCOMING, start: 0, count: 100}\n    ) {\n      total\n      __typename\n    }\n    __typename\n  }\n  ... on DataJob {\n    dataFlow {\n      ...nonRecursiveDataFlowFields\n      __typename\n    }\n    jobId\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    properties {\n      name\n      description\n      externalUrl\n      __typename\n    }\n    globalTags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    ...entityDataProduct\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    lastRun: runs(start: 0, count: 1) {\n      count\n      start\n      total\n      runs {\n        urn\n        type\n        created {\n          time\n          actor\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  ... on GlossaryTerm {\n    name\n    hierarchicalName\n    properties {\n      name\n      description\n      termSource\n      sourceRef\n      sourceUrl\n      rawSchema\n      customProperties {\n        key\n        value\n        __typename\n      }\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    parentNodes {\n      ...parentNodesFields\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    __typename\n  }\n  ... on GlossaryNode {\n    ...glossaryNode\n    parentNodes {\n      ...parentNodesFields\n      __typename\n    }\n    __typename\n  }\n  ... on Domain {\n    properties {\n      name\n      description\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    __typename\n  }\n  ... on Container {\n    properties {\n      name\n      description\n      externalUrl\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    tags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    subTypes {\n      typeNames\n      __typename\n    }\n    entities(input: {}) {\n      total\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    parentContainers {\n      ...parentContainersFields\n      __typename\n    }\n    __typename\n  }\n  ... on MLFeatureTable {\n    name\n    description\n    featureTableProperties {\n      description\n      mlFeatures {\n        urn\n        __typename\n      }\n      mlPrimaryKeys {\n        urn\n        __typename\n      }\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    __typename\n  }\n  ... on MLFeature {\n    ...nonRecursiveMLFeature\n    __typename\n  }\n  ... on MLPrimaryKey {\n    ...nonRecursiveMLPrimaryKey\n    __typename\n  }\n  ... on MLModel {\n    name\n    description\n    origin\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    __typename\n  }\n  ... on MLModelGroup {\n    name\n    origin\n    description\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    __typename\n  }\n  ... on Tag {\n    name\n    properties {\n      name\n      colorHex\n      __typename\n    }\n    description\n    __typename\n  }\n  ... on DataPlatform {\n    ...nonConflictingPlatformFields\n    __typename\n  }\n  ... on DataProduct {\n    ...dataProductSearchFields\n    __typename\n  }\n  __typename\n}\n\nfragment platformFields on DataPlatform {\n  urn\n  type\n  lastIngested\n  name\n  properties {\n    type\n    displayName\n    datasetNameDelimiter\n    logoUrl\n    __typename\n  }\n  displayName\n  info {\n    type\n    displayName\n    datasetNameDelimiter\n    logoUrl\n    __typename\n  }\n  __typename\n}\n\nfragment dataPlatformInstanceFields on DataPlatformInstance {\n  urn\n  type\n  platform {\n    ...platformFields\n    __typename\n  }\n  instanceId\n  __typename\n}\n\nfragment ownershipFields on Ownership {\n  owners {\n    owner {\n      ... on CorpUser {\n        urn\n        type\n        username\n        info {\n          active\n          displayName\n          title\n          email\n          firstName\n          lastName\n          fullName\n          __typename\n        }\n        properties {\n          active\n          displayName\n          title\n          email\n          firstName\n          lastName\n          fullName\n          __typename\n        }\n        editableProperties {\n          displayName\n          title\n          pictureLink\n          email\n          __typename\n        }\n        __typename\n      }\n      ... on CorpGroup {\n        urn\n        type\n        name\n        properties {\n          displayName\n          email\n          __typename\n        }\n        info {\n          displayName\n          email\n          admins {\n            urn\n            username\n            info {\n              active\n              displayName\n              title\n              email\n              firstName\n              lastName\n              fullName\n              __typename\n            }\n            editableInfo {\n              pictureLink\n              teams\n              skills\n              __typename\n            }\n            __typename\n          }\n          members {\n            urn\n            username\n            info {\n              active\n              displayName\n              title\n              email\n              firstName\n              lastName\n              fullName\n              __typename\n            }\n            editableInfo {\n              pictureLink\n              teams\n              skills\n              __typename\n            }\n            __typename\n          }\n          groups\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    type\n    ownershipType {\n      urn\n      type\n      info {\n        name\n        description\n        __typename\n      }\n      status {\n        removed\n        __typename\n      }\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  lastModified {\n    time\n    __typename\n  }\n  __typename\n}\n\nfragment globalTagsFields on GlobalTags {\n  tags {\n    tag {\n      urn\n      type\n      name\n      description\n      properties {\n        name\n        colorHex\n        __typename\n      }\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  __typename\n}\n\nfragment glossaryTerms on GlossaryTerms {\n  terms {\n    term {\n      ...glossaryTerm\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  __typename\n}\n\nfragment glossaryTerm on GlossaryTerm {\n  urn\n  name\n  type\n  hierarchicalName\n  properties {\n    name\n    description\n    definition\n    termSource\n    customProperties {\n      key\n      value\n      __typename\n    }\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  parentNodes {\n    ...parentNodesFields\n    __typename\n  }\n  __typename\n}\n\nfragment parentNodesFields on ParentNodesResult {\n  count\n  nodes {\n    urn\n    type\n    properties {\n      name\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment entityDomain on DomainAssociation {\n  domain {\n    urn\n    type\n    properties {\n      name\n      description\n      __typename\n    }\n    __typename\n  }\n  associatedUrn\n  __typename\n}\n\nfragment entityDataProduct on Entity {\n  dataProduct: relationships(\n    input: {types: ["DataProductContains"], direction: INCOMING, start: 0, count: 1}\n  ) {\n    relationships {\n      type\n      entity {\n        urn\n        type\n        ... on DataProduct {\n          properties {\n            name\n            description\n            __typename\n          }\n          domain {\n            ...entityDomain\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment parentContainersFields on ParentContainersResult {\n  count\n  containers {\n    ...parentContainerFields\n    __typename\n  }\n  __typename\n}\n\nfragment parentContainerFields on Container {\n  urn\n  properties {\n    name\n    __typename\n  }\n  __typename\n}\n\nfragment deprecationFields on Deprecation {\n  actor\n  deprecated\n  note\n  decommissionTime\n  __typename\n}\n\nfragment datasetStatsFields on Dataset {\n  lastProfile: datasetProfiles(limit: 1) {\n    rowCount\n    columnCount\n    sizeInBytes\n    timestampMillis\n    __typename\n  }\n  lastOperation: operations(limit: 1) {\n    lastUpdatedTimestamp\n    timestampMillis\n    __typename\n  }\n  statsSummary {\n    queryCountLast30Days\n    uniqueUserCountLast30Days\n    topUsersLast30Days {\n      urn\n      type\n      username\n      properties {\n        displayName\n        firstName\n        lastName\n        fullName\n        __typename\n      }\n      editableProperties {\n        displayName\n        pictureLink\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment nonRecursiveDataFlowFields on DataFlow {\n  urn\n  type\n  orchestrator\n  flowId\n  cluster\n  properties {\n    name\n    description\n    project\n    externalUrl\n    customProperties {\n      key\n      value\n      __typename\n    }\n    __typename\n  }\n  editableProperties {\n    description\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  platform {\n    ...platformFields\n    __typename\n  }\n  domain {\n    ...entityDomain\n    __typename\n  }\n  ...entityDataProduct\n  deprecation {\n    ...deprecationFields\n    __typename\n  }\n  __typename\n}\n\nfragment glossaryNode on GlossaryNode {\n  urn\n  type\n  properties {\n    name\n    __typename\n  }\n  children: relationships(\n    input: {types: ["IsPartOf"], direction: INCOMING, start: 0, count: 10000}\n  ) {\n    total\n    __typename\n  }\n  __typename\n}\n\nfragment nonRecursiveMLFeature on MLFeature {\n  urn\n  type\n  exists\n  lastIngested\n  name\n  featureNamespace\n  description\n  dataType\n  properties {\n    description\n    dataType\n    version {\n      versionTag\n      __typename\n    }\n    sources {\n      urn\n      name\n      type\n      origin\n      description\n      uri\n      platform {\n        ...platformFields\n        __typename\n      }\n      platformNativeType\n      __typename\n    }\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  institutionalMemory {\n    ...institutionalMemoryFields\n    __typename\n  }\n  status {\n    removed\n    __typename\n  }\n  glossaryTerms {\n    ...glossaryTerms\n    __typename\n  }\n  domain {\n    ...entityDomain\n    __typename\n  }\n  ...entityDataProduct\n  tags {\n    ...globalTagsFields\n    __typename\n  }\n  editableProperties {\n    description\n    __typename\n  }\n  deprecation {\n    ...deprecationFields\n    __typename\n  }\n  dataPlatformInstance {\n    ...dataPlatformInstanceFields\n    __typename\n  }\n  browsePathV2 {\n    ...browsePathV2Fields\n    __typename\n  }\n  featureTables: relationships(\n    input: {types: ["Contains"], direction: INCOMING, start: 0, count: 100}\n  ) {\n    relationships {\n      type\n      entity {\n        ... on MLFeatureTable {\n          platform {\n            ...platformFields\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment institutionalMemoryFields on InstitutionalMemory {\n  elements {\n    url\n    author {\n      urn\n      username\n      __typename\n    }\n    description\n    created {\n      actor\n      time\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  __typename\n}\n\nfragment browsePathV2Fields on BrowsePathV2 {\n  path {\n    name\n    entity {\n      urn\n      type\n      ... on Container {\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      ... on DataFlow {\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      ... on DataPlatformInstance {\n        platform {\n          name\n          properties {\n            displayName\n            __typename\n          }\n          __typename\n        }\n        instanceId\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment nonRecursiveMLPrimaryKey on MLPrimaryKey {\n  urn\n  type\n  exists\n  lastIngested\n  name\n  featureNamespace\n  description\n  dataType\n  properties {\n    description\n    dataType\n    version {\n      versionTag\n      __typename\n    }\n    sources {\n      urn\n      name\n      type\n      origin\n      description\n      uri\n      platform {\n        ...platformFields\n        __typename\n      }\n      platformNativeType\n      __typename\n    }\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  institutionalMemory {\n    ...institutionalMemoryFields\n    __typename\n  }\n  status {\n    removed\n    __typename\n  }\n  glossaryTerms {\n    ...glossaryTerms\n    __typename\n  }\n  domain {\n    ...entityDomain\n    __typename\n  }\n  ...entityDataProduct\n  tags {\n    ...globalTagsFields\n    __typename\n  }\n  editableProperties {\n    description\n    __typename\n  }\n  deprecation {\n    ...deprecationFields\n    __typename\n  }\n  dataPlatformInstance {\n    ...dataPlatformInstanceFields\n    __typename\n  }\n  featureTables: relationships(\n    input: {types: ["KeyedBy"], direction: INCOMING, start: 0, count: 100}\n  ) {\n    relationships {\n      type\n      entity {\n        ... on MLFeatureTable {\n          platform {\n            ...platformFields\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment nonConflictingPlatformFields on DataPlatform {\n  urn\n  type\n  name\n  properties {\n    displayName\n    datasetNameDelimiter\n    logoUrl\n    __typename\n  }\n  displayName\n  info {\n    type\n    displayName\n    datasetNameDelimiter\n    logoUrl\n    __typename\n  }\n  __typename\n}\n\nfragment dataProductSearchFields on DataProduct {\n  urn\n  type\n  properties {\n    name\n    description\n    externalUrl\n    numAssets\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  tags {\n    ...globalTagsFields\n    __typename\n  }\n  glossaryTerms {\n    ...glossaryTerms\n    __typename\n  }\n  domain {\n    ...entityDomain\n    __typename\n  }\n  __typename\n}\n\nfragment facetFields on FacetMetadata {\n  field\n  displayName\n  aggregations {\n    value\n    count\n    entity {\n      urn\n      type\n      ... on Tag {\n        name\n        properties {\n          name\n          colorHex\n          __typename\n        }\n        __typename\n      }\n      ... on GlossaryTerm {\n        name\n        properties {\n          name\n          __typename\n        }\n        parentNodes {\n          ...parentNodesFields\n          __typename\n        }\n        __typename\n      }\n      ... on DataPlatform {\n        ...platformFields\n        __typename\n      }\n      ... on DataPlatformInstance {\n        ...dataPlatformInstanceFields\n        __typename\n      }\n      ... on Domain {\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      ... on Container {\n        platform {\n          ...platformFields\n          __typename\n        }\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      ... on CorpUser {\n        username\n        properties {\n          displayName\n          fullName\n          __typename\n        }\n        editableProperties {\n          displayName\n          pictureLink\n          __typename\n        }\n        __typename\n      }\n      ... on CorpGroup {\n        name\n        properties {\n          displayName\n          __typename\n        }\n        __typename\n      }\n      ... on DataProduct {\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n',
    },
    {
      headers: {
        authority: "demo.datahubproject.io",
        accept: "*/*",
        "accept-language": "en-US,en;q=0.9",
        "content-type": "application/json",
        cookie:
          "bid=da83c943-dd00-4b9b-95eb-f279d3989f27; PLAY_SESSION=13d96bfdbab0717742dc498f0eb0cc9850790381-actor=urn%3Ali%3Acorpuser%3Adatahub&token=eyJhbGciOiJIUzI1NiJ9.eyJhY3RvclR5cGUiOiJVU0VSIiwiYWN0b3JJZCI6ImRhdGFodWIiLCJ0eXBlIjoiU0VTU0lPTiIsInZlcnNpb24iOiIxIiwianRpIjoiMTEwZjg1MzktOTY3OC00YzNjLWIwYTEtMGQzNWVjOWYxMTM4Iiwic3ViIjoiZGF0YWh1YiIsImV4cCI6MTY5MzQ4OTgyNCwiaXNzIjoiZGF0YWh1Yi1tZXRhZGF0YS1zZXJ2aWNlIn0.MgcFuVk-l0RWBrvU0Gov3XuHghkqIRolF1_1EXvNekU; actor=urn:li:corpuser:datahub",
        origin: "https://demo.datahubproject.io",
        referer:
          "https://demo.datahubproject.io/search?filter__entityType___false___EQUAL___0=DATASET&page=1&query=Datasets&unionType=0",
        "sec-ch-ua":
          '"Chromium";v="116", "Not)A;Brand";v="24", "Google Chrome";v="116"',
        "sec-ch-ua-mobile": "?0",
        "sec-ch-ua-platform": '"Windows"',
        "sec-fetch-dest": "empty",
        "sec-fetch-mode": "cors",
        "sec-fetch-site": "same-origin",
        "user-agent":
          "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36",
      },
    }
  );
  console.log(response.data.data.searchAcrossEntities, "this is response");
  return res.status(200).json({
    message: "Successfully fetched data",
    data: response.data.data.searchAcrossEntities.searchResults,
  });

  //   res.status(200).json(user);
});

router.post("/fetch_dataset-schema", async (req, res) => {
  const response1 = await axios.post(
    "https://demo.datahubproject.io/api/v2/graphql",
    {
      operationName: "getDataset",
      variables: {
        urn: `urn:li:dataset:(urn:li:dataPlatform:snowflake,demo_pipeline.public.${req.body.name},PROD)`,
      },
      query:
        'query getDataset($urn: String!) {\n  dataset(urn: $urn) {\n    exists\n    ...nonSiblingDatasetFields\n    siblings {\n      isPrimary\n      siblings {\n        urn\n        type\n        ...nonSiblingDatasetFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment nonSiblingDatasetFields on Dataset {\n  ...nonRecursiveDatasetFields\n  deprecation {\n    actor\n    deprecated\n    note\n    decommissionTime\n    __typename\n  }\n  globalTags {\n    ...globalTagsFields\n    __typename\n  }\n  glossaryTerms {\n    ...glossaryTerms\n    __typename\n  }\n  subTypes {\n    typeNames\n    __typename\n  }\n  domain {\n    ...entityDomain\n    __typename\n  }\n  ...entityDataProduct\n  parentContainers {\n    ...parentContainersFields\n    __typename\n  }\n  usageStats(range: MONTH) {\n    buckets {\n      bucket\n      metrics {\n        totalSqlQueries\n        __typename\n      }\n      __typename\n    }\n    aggregations {\n      uniqueUserCount\n      totalSqlQueries\n      fields {\n        fieldName\n        count\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  datasetProfiles(limit: 1) {\n    rowCount\n    columnCount\n    sizeInBytes\n    timestampMillis\n    fieldProfiles {\n      fieldPath\n      uniqueCount\n      uniqueProportion\n      nullCount\n      nullProportion\n      min\n      max\n      mean\n      median\n      stdev\n      sampleValues\n      __typename\n    }\n    __typename\n  }\n  health {\n    type\n    status\n    message\n    causes\n    __typename\n  }\n  assertions(start: 0, count: 1) {\n    total\n    __typename\n  }\n  operations(limit: 1) {\n    timestampMillis\n    lastUpdatedTimestamp\n    __typename\n  }\n  ...viewProperties\n  autoRenderAspects: aspects(input: {autoRenderOnly: true}) {\n    aspectName\n    payload\n    renderSpec {\n      displayType\n      displayName\n      key\n      __typename\n    }\n    __typename\n  }\n  status {\n    removed\n    __typename\n  }\n  readRuns: runs(start: 0, count: 20, direction: INCOMING) {\n    count\n    start\n    total\n    __typename\n  }\n  writeRuns: runs(start: 0, count: 20, direction: OUTGOING) {\n    count\n    start\n    total\n    __typename\n  }\n  testResults {\n    passing {\n      test {\n        ...testFields\n        __typename\n      }\n      type\n      __typename\n    }\n    failing {\n      test {\n        ...testFields\n        __typename\n      }\n      type\n      __typename\n    }\n    __typename\n  }\n  statsSummary {\n    queryCountLast30Days\n    uniqueUserCountLast30Days\n    topUsersLast30Days {\n      urn\n      type\n      username\n      properties {\n        displayName\n        firstName\n        lastName\n        fullName\n        __typename\n      }\n      editableProperties {\n        displayName\n        pictureLink\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  siblings {\n    isPrimary\n    __typename\n  }\n  privileges {\n    canEditLineage\n    canEditEmbed\n    canEditQueries\n    __typename\n  }\n  __typename\n}\n\nfragment nonRecursiveDatasetFields on Dataset {\n  urn\n  name\n  type\n  origin\n  uri\n  lastIngested\n  platform {\n    ...platformFields\n    __typename\n  }\n  dataPlatformInstance {\n    ...dataPlatformInstanceFields\n    __typename\n  }\n  platformNativeType\n  properties {\n    name\n    description\n    customProperties {\n      key\n      value\n      __typename\n    }\n    externalUrl\n    __typename\n  }\n  editableProperties {\n    description\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  institutionalMemory {\n    ...institutionalMemoryFields\n    __typename\n  }\n  globalTags {\n    ...globalTagsFields\n    __typename\n  }\n  glossaryTerms {\n    ...glossaryTerms\n    __typename\n  }\n  subTypes {\n    typeNames\n    __typename\n  }\n  domain {\n    ...entityDomain\n    __typename\n  }\n  ...entityDataProduct\n  container {\n    ...entityContainer\n    __typename\n  }\n  deprecation {\n    ...deprecationFields\n    __typename\n  }\n  embed {\n    ...embedFields\n    __typename\n  }\n  browsePathV2 {\n    ...browsePathV2Fields\n    __typename\n  }\n  __typename\n}\n\nfragment platformFields on DataPlatform {\n  urn\n  type\n  lastIngested\n  name\n  properties {\n    type\n    displayName\n    datasetNameDelimiter\n    logoUrl\n    __typename\n  }\n  displayName\n  info {\n    type\n    displayName\n    datasetNameDelimiter\n    logoUrl\n    __typename\n  }\n  __typename\n}\n\nfragment dataPlatformInstanceFields on DataPlatformInstance {\n  urn\n  type\n  platform {\n    ...platformFields\n    __typename\n  }\n  instanceId\n  __typename\n}\n\nfragment ownershipFields on Ownership {\n  owners {\n    owner {\n      ... on CorpUser {\n        urn\n        type\n        username\n        info {\n          active\n          displayName\n          title\n          email\n          firstName\n          lastName\n          fullName\n          __typename\n        }\n        properties {\n          active\n          displayName\n          title\n          email\n          firstName\n          lastName\n          fullName\n          __typename\n        }\n        editableProperties {\n          displayName\n          title\n          pictureLink\n          email\n          __typename\n        }\n        __typename\n      }\n      ... on CorpGroup {\n        urn\n        type\n        name\n        properties {\n          displayName\n          email\n          __typename\n        }\n        info {\n          displayName\n          email\n          admins {\n            urn\n            username\n            info {\n              active\n              displayName\n              title\n              email\n              firstName\n              lastName\n              fullName\n              __typename\n            }\n            editableInfo {\n              pictureLink\n              teams\n              skills\n              __typename\n            }\n            __typename\n          }\n          members {\n            urn\n            username\n            info {\n              active\n              displayName\n              title\n              email\n              firstName\n              lastName\n              fullName\n              __typename\n            }\n            editableInfo {\n              pictureLink\n              teams\n              skills\n              __typename\n            }\n            __typename\n          }\n          groups\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    type\n    ownershipType {\n      urn\n      type\n      info {\n        name\n        description\n        __typename\n      }\n      status {\n        removed\n        __typename\n      }\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  lastModified {\n    time\n    __typename\n  }\n  __typename\n}\n\nfragment institutionalMemoryFields on InstitutionalMemory {\n  elements {\n    url\n    author {\n      urn\n      username\n      __typename\n    }\n    description\n    created {\n      actor\n      time\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  __typename\n}\n\nfragment globalTagsFields on GlobalTags {\n  tags {\n    tag {\n      urn\n      type\n      name\n      description\n      properties {\n        name\n        colorHex\n        __typename\n      }\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  __typename\n}\n\nfragment glossaryTerms on GlossaryTerms {\n  terms {\n    term {\n      ...glossaryTerm\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  __typename\n}\n\nfragment glossaryTerm on GlossaryTerm {\n  urn\n  name\n  type\n  hierarchicalName\n  properties {\n    name\n    description\n    definition\n    termSource\n    customProperties {\n      key\n      value\n      __typename\n    }\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  parentNodes {\n    ...parentNodesFields\n    __typename\n  }\n  __typename\n}\n\nfragment parentNodesFields on ParentNodesResult {\n  count\n  nodes {\n    urn\n    type\n    properties {\n      name\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment entityDomain on DomainAssociation {\n  domain {\n    urn\n    type\n    properties {\n      name\n      description\n      __typename\n    }\n    __typename\n  }\n  associatedUrn\n  __typename\n}\n\nfragment entityDataProduct on Entity {\n  dataProduct: relationships(\n    input: {types: ["DataProductContains"], direction: INCOMING, start: 0, count: 1}\n  ) {\n    relationships {\n      type\n      entity {\n        urn\n        type\n        ... on DataProduct {\n          properties {\n            name\n            description\n            __typename\n          }\n          domain {\n            ...entityDomain\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment entityContainer on Container {\n  urn\n  platform {\n    ...platformFields\n    __typename\n  }\n  properties {\n    name\n    __typename\n  }\n  subTypes {\n    typeNames\n    __typename\n  }\n  deprecation {\n    ...deprecationFields\n    __typename\n  }\n  __typename\n}\n\nfragment deprecationFields on Deprecation {\n  actor\n  deprecated\n  note\n  decommissionTime\n  __typename\n}\n\nfragment embedFields on Embed {\n  renderUrl\n  __typename\n}\n\nfragment browsePathV2Fields on BrowsePathV2 {\n  path {\n    name\n    entity {\n      urn\n      type\n      ... on Container {\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      ... on DataFlow {\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      ... on DataPlatformInstance {\n        platform {\n          name\n          properties {\n            displayName\n            __typename\n          }\n          __typename\n        }\n        instanceId\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment parentContainersFields on ParentContainersResult {\n  count\n  containers {\n    ...parentContainerFields\n    __typename\n  }\n  __typename\n}\n\nfragment parentContainerFields on Container {\n  urn\n  properties {\n    name\n    __typename\n  }\n  __typename\n}\n\nfragment viewProperties on Dataset {\n  viewProperties {\n    materialized\n    logic\n    language\n    __typename\n  }\n  __typename\n}\n\nfragment testFields on Test {\n  urn\n  name\n  category\n  description\n  definition {\n    json\n    __typename\n  }\n  __typename\n}\n',
    },
    {
      headers: {
        authority: "demo.datahubproject.io",
        accept: "*/*",
        "accept-language": "en-US,en;q=0.9",
        "content-type": "application/json",
        cookie:
          "bid=da83c943-dd00-4b9b-95eb-f279d3989f27; PLAY_SESSION=13d96bfdbab0717742dc498f0eb0cc9850790381-actor=urn%3Ali%3Acorpuser%3Adatahub&token=eyJhbGciOiJIUzI1NiJ9.eyJhY3RvclR5cGUiOiJVU0VSIiwiYWN0b3JJZCI6ImRhdGFodWIiLCJ0eXBlIjoiU0VTU0lPTiIsInZlcnNpb24iOiIxIiwianRpIjoiMTEwZjg1MzktOTY3OC00YzNjLWIwYTEtMGQzNWVjOWYxMTM4Iiwic3ViIjoiZGF0YWh1YiIsImV4cCI6MTY5MzQ4OTgyNCwiaXNzIjoiZGF0YWh1Yi1tZXRhZGF0YS1zZXJ2aWNlIn0.MgcFuVk-l0RWBrvU0Gov3XuHghkqIRolF1_1EXvNekU; actor=urn:li:corpuser:datahub",
        origin: "https://demo.datahubproject.io",
        referer:
          "https://demo.datahubproject.io/dataset/urn:li:dataset:(urn:li:dataPlatform:snowflake,demo_pipeline.public.dataset_properties,PROD)/Schema?is_lineage_mode=false&schemaFilter=",
        "sec-ch-ua":
          '"Chromium";v="116", "Not)A;Brand";v="24", "Google Chrome";v="116"',
        "sec-ch-ua-mobile": "?0",
        "sec-ch-ua-platform": '"Windows"',
        "sec-fetch-dest": "empty",
        "sec-fetch-mode": "cors",
        "sec-fetch-site": "same-origin",
        "user-agent":
          "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36",
      },
    }
  );

  //   const response2 = await axios.post(
  //     "https://demo.datahubproject.io/api/v2/graphql",
  //     {
  //       operationName: "searchAcrossLineage",
  //       variables: {
  //         includeAssertions: false,
  //         input: {
  //           urn: "urn:li:dataset:(urn:li:dataPlatform:looker,datahub-demo.explore.datasets,PROD)",
  //           direction: "DOWNSTREAM",
  //           types: [],
  //           query: "",
  //           start: 0,
  //           count: 10,
  //           orFilters: [
  //             {
  //               and: [
  //                 {
  //                   field: "degree",
  //                   condition: "EQUAL",
  //                   values: ["1"],
  //                   negated: false,
  //                 },
  //               ],
  //             },
  //           ],
  //         },
  //       },
  //       query:
  //         'query searchAcrossLineage($input: SearchAcrossLineageInput!, $includeAssertions: Boolean = false) {\n  searchAcrossLineage(input: $input) {\n    ...searchAcrossRelationshipResults\n    __typename\n  }\n}\n\nfragment searchAcrossRelationshipResults on SearchAcrossLineageResults {\n  start\n  count\n  total\n  searchResults {\n    entity {\n      ...searchResultFields\n      ... on Dataset {\n        assertions(start: 0, count: 1000) @include(if: $includeAssertions) {\n          assertions {\n            runEvents(status: COMPLETE, limit: 1) {\n              total\n              failed\n              succeeded\n              __typename\n            }\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    matchedFields {\n      name\n      value\n      __typename\n    }\n    insights {\n      text\n      icon\n      __typename\n    }\n    paths {\n      path {\n        ...searchResultFields\n        ... on SchemaFieldEntity {\n          ...schemaFieldEntityFields\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    degree\n    __typename\n  }\n  facets {\n    ...facetFields\n    __typename\n  }\n  __typename\n}\n\nfragment searchResultFields on Entity {\n  urn\n  type\n  ... on Dataset {\n    name\n    origin\n    uri\n    platform {\n      ...platformFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    platformNativeType\n    properties {\n      name\n      description\n      qualifiedName\n      customProperties {\n        key\n        value\n        __typename\n      }\n      externalUrl\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    globalTags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    subTypes {\n      typeNames\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    ...entityDataProduct\n    parentContainers {\n      ...parentContainersFields\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    siblings {\n      isPrimary\n      siblings {\n        urn\n        type\n        ... on Dataset {\n          platform {\n            ...platformFields\n            __typename\n          }\n          name\n          properties {\n            name\n            description\n            qualifiedName\n            externalUrl\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    ...datasetStatsFields\n    __typename\n  }\n  ... on CorpUser {\n    username\n    properties {\n      active\n      displayName\n      title\n      firstName\n      lastName\n      fullName\n      email\n      __typename\n    }\n    info {\n      active\n      displayName\n      title\n      firstName\n      lastName\n      fullName\n      email\n      __typename\n    }\n    editableProperties {\n      displayName\n      title\n      pictureLink\n      __typename\n    }\n    __typename\n  }\n  ... on CorpGroup {\n    name\n    info {\n      displayName\n      description\n      __typename\n    }\n    memberCount: relationships(\n      input: {types: ["IsMemberOfGroup", "IsMemberOfNativeGroup"], direction: INCOMING, start: 0, count: 1}\n    ) {\n      total\n      __typename\n    }\n    __typename\n  }\n  ... on Dashboard {\n    dashboardId\n    properties {\n      name\n      description\n      externalUrl\n      access\n      lastModified {\n        time\n        __typename\n      }\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    globalTags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    ...entityDataProduct\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    parentContainers {\n      ...parentContainersFields\n      __typename\n    }\n    statsSummary {\n      viewCount\n      uniqueUserCountLast30Days\n      topUsersLast30Days {\n        urn\n        type\n        username\n        properties {\n          displayName\n          firstName\n          lastName\n          fullName\n          __typename\n        }\n        editableProperties {\n          displayName\n          pictureLink\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    subTypes {\n      typeNames\n      __typename\n    }\n    __typename\n  }\n  ... on Chart {\n    chartId\n    properties {\n      name\n      description\n      externalUrl\n      type\n      access\n      lastModified {\n        time\n        __typename\n      }\n      created {\n        time\n        __typename\n      }\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    globalTags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    ...entityDataProduct\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    parentContainers {\n      ...parentContainersFields\n      __typename\n    }\n    statsSummary {\n      viewCount\n      uniqueUserCountLast30Days\n      topUsersLast30Days {\n        urn\n        type\n        username\n        properties {\n          displayName\n          firstName\n          lastName\n          fullName\n          __typename\n        }\n        editableProperties {\n          displayName\n          pictureLink\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  ... on DataFlow {\n    flowId\n    cluster\n    properties {\n      name\n      description\n      project\n      externalUrl\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    globalTags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    ...entityDataProduct\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    childJobs: relationships(\n      input: {types: ["IsPartOf"], direction: INCOMING, start: 0, count: 100}\n    ) {\n      total\n      __typename\n    }\n    __typename\n  }\n  ... on DataJob {\n    dataFlow {\n      ...nonRecursiveDataFlowFields\n      __typename\n    }\n    jobId\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    properties {\n      name\n      description\n      externalUrl\n      __typename\n    }\n    globalTags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    ...entityDataProduct\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    lastRun: runs(start: 0, count: 1) {\n      count\n      start\n      total\n      runs {\n        urn\n        type\n        created {\n          time\n          actor\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  ... on GlossaryTerm {\n    name\n    hierarchicalName\n    properties {\n      name\n      description\n      termSource\n      sourceRef\n      sourceUrl\n      rawSchema\n      customProperties {\n        key\n        value\n        __typename\n      }\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    parentNodes {\n      ...parentNodesFields\n      __typename\n    }\n    domain {\n      ...entityDomain\n      __typename\n    }\n    __typename\n  }\n  ... on GlossaryNode {\n    ...glossaryNode\n    parentNodes {\n      ...parentNodesFields\n      __typename\n    }\n    __typename\n  }\n  ... on Domain {\n    properties {\n      name\n      description\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    __typename\n  }\n  ... on Container {\n    properties {\n      name\n      description\n      externalUrl\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    editableProperties {\n      description\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    tags {\n      ...globalTagsFields\n      __typename\n    }\n    glossaryTerms {\n      ...glossaryTerms\n      __typename\n    }\n    subTypes {\n      typeNames\n      __typename\n    }\n    entities(input: {}) {\n      total\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    parentContainers {\n      ...parentContainersFields\n      __typename\n    }\n    __typename\n  }\n  ... on MLFeatureTable {\n    name\n    description\n    featureTableProperties {\n      description\n      mlFeatures {\n        urn\n        __typename\n      }\n      mlPrimaryKeys {\n        urn\n        __typename\n      }\n      __typename\n    }\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    __typename\n  }\n  ... on MLFeature {\n    ...nonRecursiveMLFeature\n    __typename\n  }\n  ... on MLPrimaryKey {\n    ...nonRecursiveMLPrimaryKey\n    __typename\n  }\n  ... on MLModel {\n    name\n    description\n    origin\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    __typename\n  }\n  ... on MLModelGroup {\n    name\n    origin\n    description\n    ownership {\n      ...ownershipFields\n      __typename\n    }\n    platform {\n      ...platformFields\n      __typename\n    }\n    deprecation {\n      ...deprecationFields\n      __typename\n    }\n    dataPlatformInstance {\n      ...dataPlatformInstanceFields\n      __typename\n    }\n    __typename\n  }\n  ... on Tag {\n    name\n    properties {\n      name\n      colorHex\n      __typename\n    }\n    description\n    __typename\n  }\n  ... on DataPlatform {\n    ...nonConflictingPlatformFields\n    __typename\n  }\n  ... on DataProduct {\n    ...dataProductSearchFields\n    __typename\n  }\n  __typename\n}\n\nfragment platformFields on DataPlatform {\n  urn\n  type\n  lastIngested\n  name\n  properties {\n    type\n    displayName\n    datasetNameDelimiter\n    logoUrl\n    __typename\n  }\n  displayName\n  info {\n    type\n    displayName\n    datasetNameDelimiter\n    logoUrl\n    __typename\n  }\n  __typename\n}\n\nfragment dataPlatformInstanceFields on DataPlatformInstance {\n  urn\n  type\n  platform {\n    ...platformFields\n    __typename\n  }\n  instanceId\n  __typename\n}\n\nfragment ownershipFields on Ownership {\n  owners {\n    owner {\n      ... on CorpUser {\n        urn\n        type\n        username\n        info {\n          active\n          displayName\n          title\n          email\n          firstName\n          lastName\n          fullName\n          __typename\n        }\n        properties {\n          active\n          displayName\n          title\n          email\n          firstName\n          lastName\n          fullName\n          __typename\n        }\n        editableProperties {\n          displayName\n          title\n          pictureLink\n          email\n          __typename\n        }\n        __typename\n      }\n      ... on CorpGroup {\n        urn\n        type\n        name\n        properties {\n          displayName\n          email\n          __typename\n        }\n        info {\n          displayName\n          email\n          admins {\n            urn\n            username\n            info {\n              active\n              displayName\n              title\n              email\n              firstName\n              lastName\n              fullName\n              __typename\n            }\n            editableInfo {\n              pictureLink\n              teams\n              skills\n              __typename\n            }\n            __typename\n          }\n          members {\n            urn\n            username\n            info {\n              active\n              displayName\n              title\n              email\n              firstName\n              lastName\n              fullName\n              __typename\n            }\n            editableInfo {\n              pictureLink\n              teams\n              skills\n              __typename\n            }\n            __typename\n          }\n          groups\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    type\n    ownershipType {\n      urn\n      type\n      info {\n        name\n        description\n        __typename\n      }\n      status {\n        removed\n        __typename\n      }\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  lastModified {\n    time\n    __typename\n  }\n  __typename\n}\n\nfragment globalTagsFields on GlobalTags {\n  tags {\n    tag {\n      urn\n      type\n      name\n      description\n      properties {\n        name\n        colorHex\n        __typename\n      }\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  __typename\n}\n\nfragment glossaryTerms on GlossaryTerms {\n  terms {\n    term {\n      ...glossaryTerm\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  __typename\n}\n\nfragment glossaryTerm on GlossaryTerm {\n  urn\n  name\n  type\n  hierarchicalName\n  properties {\n    name\n    description\n    definition\n    termSource\n    customProperties {\n      key\n      value\n      __typename\n    }\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  parentNodes {\n    ...parentNodesFields\n    __typename\n  }\n  __typename\n}\n\nfragment parentNodesFields on ParentNodesResult {\n  count\n  nodes {\n    urn\n    type\n    properties {\n      name\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment entityDomain on DomainAssociation {\n  domain {\n    urn\n    type\n    properties {\n      name\n      description\n      __typename\n    }\n    __typename\n  }\n  associatedUrn\n  __typename\n}\n\nfragment entityDataProduct on Entity {\n  dataProduct: relationships(\n    input: {types: ["DataProductContains"], direction: INCOMING, start: 0, count: 1}\n  ) {\n    relationships {\n      type\n      entity {\n        urn\n        type\n        ... on DataProduct {\n          properties {\n            name\n            description\n            __typename\n          }\n          domain {\n            ...entityDomain\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment parentContainersFields on ParentContainersResult {\n  count\n  containers {\n    ...parentContainerFields\n    __typename\n  }\n  __typename\n}\n\nfragment parentContainerFields on Container {\n  urn\n  properties {\n    name\n    __typename\n  }\n  __typename\n}\n\nfragment deprecationFields on Deprecation {\n  actor\n  deprecated\n  note\n  decommissionTime\n  __typename\n}\n\nfragment datasetStatsFields on Dataset {\n  lastProfile: datasetProfiles(limit: 1) {\n    rowCount\n    columnCount\n    sizeInBytes\n    timestampMillis\n    __typename\n  }\n  lastOperation: operations(limit: 1) {\n    lastUpdatedTimestamp\n    timestampMillis\n    __typename\n  }\n  statsSummary {\n    queryCountLast30Days\n    uniqueUserCountLast30Days\n    topUsersLast30Days {\n      urn\n      type\n      username\n      properties {\n        displayName\n        firstName\n        lastName\n        fullName\n        __typename\n      }\n      editableProperties {\n        displayName\n        pictureLink\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment nonRecursiveDataFlowFields on DataFlow {\n  urn\n  type\n  orchestrator\n  flowId\n  cluster\n  properties {\n    name\n    description\n    project\n    externalUrl\n    customProperties {\n      key\n      value\n      __typename\n    }\n    __typename\n  }\n  editableProperties {\n    description\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  platform {\n    ...platformFields\n    __typename\n  }\n  domain {\n    ...entityDomain\n    __typename\n  }\n  ...entityDataProduct\n  deprecation {\n    ...deprecationFields\n    __typename\n  }\n  __typename\n}\n\nfragment glossaryNode on GlossaryNode {\n  urn\n  type\n  properties {\n    name\n    __typename\n  }\n  children: relationships(\n    input: {types: ["IsPartOf"], direction: INCOMING, start: 0, count: 10000}\n  ) {\n    total\n    __typename\n  }\n  __typename\n}\n\nfragment nonRecursiveMLFeature on MLFeature {\n  urn\n  type\n  exists\n  lastIngested\n  name\n  featureNamespace\n  description\n  dataType\n  properties {\n    description\n    dataType\n    version {\n      versionTag\n      __typename\n    }\n    sources {\n      urn\n      name\n      type\n      origin\n      description\n      uri\n      platform {\n        ...platformFields\n        __typename\n      }\n      platformNativeType\n      __typename\n    }\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  institutionalMemory {\n    ...institutionalMemoryFields\n    __typename\n  }\n  status {\n    removed\n    __typename\n  }\n  glossaryTerms {\n    ...glossaryTerms\n    __typename\n  }\n  domain {\n    ...entityDomain\n    __typename\n  }\n  ...entityDataProduct\n  tags {\n    ...globalTagsFields\n    __typename\n  }\n  editableProperties {\n    description\n    __typename\n  }\n  deprecation {\n    ...deprecationFields\n    __typename\n  }\n  dataPlatformInstance {\n    ...dataPlatformInstanceFields\n    __typename\n  }\n  browsePathV2 {\n    ...browsePathV2Fields\n    __typename\n  }\n  featureTables: relationships(\n    input: {types: ["Contains"], direction: INCOMING, start: 0, count: 100}\n  ) {\n    relationships {\n      type\n      entity {\n        ... on MLFeatureTable {\n          platform {\n            ...platformFields\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment institutionalMemoryFields on InstitutionalMemory {\n  elements {\n    url\n    author {\n      urn\n      username\n      __typename\n    }\n    description\n    created {\n      actor\n      time\n      __typename\n    }\n    associatedUrn\n    __typename\n  }\n  __typename\n}\n\nfragment browsePathV2Fields on BrowsePathV2 {\n  path {\n    name\n    entity {\n      urn\n      type\n      ... on Container {\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      ... on DataFlow {\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      ... on DataPlatformInstance {\n        platform {\n          name\n          properties {\n            displayName\n            __typename\n          }\n          __typename\n        }\n        instanceId\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment nonRecursiveMLPrimaryKey on MLPrimaryKey {\n  urn\n  type\n  exists\n  lastIngested\n  name\n  featureNamespace\n  description\n  dataType\n  properties {\n    description\n    dataType\n    version {\n      versionTag\n      __typename\n    }\n    sources {\n      urn\n      name\n      type\n      origin\n      description\n      uri\n      platform {\n        ...platformFields\n        __typename\n      }\n      platformNativeType\n      __typename\n    }\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  institutionalMemory {\n    ...institutionalMemoryFields\n    __typename\n  }\n  status {\n    removed\n    __typename\n  }\n  glossaryTerms {\n    ...glossaryTerms\n    __typename\n  }\n  domain {\n    ...entityDomain\n    __typename\n  }\n  ...entityDataProduct\n  tags {\n    ...globalTagsFields\n    __typename\n  }\n  editableProperties {\n    description\n    __typename\n  }\n  deprecation {\n    ...deprecationFields\n    __typename\n  }\n  dataPlatformInstance {\n    ...dataPlatformInstanceFields\n    __typename\n  }\n  featureTables: relationships(\n    input: {types: ["KeyedBy"], direction: INCOMING, start: 0, count: 100}\n  ) {\n    relationships {\n      type\n      entity {\n        ... on MLFeatureTable {\n          platform {\n            ...platformFields\n            __typename\n          }\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment nonConflictingPlatformFields on DataPlatform {\n  urn\n  type\n  name\n  properties {\n    displayName\n    datasetNameDelimiter\n    logoUrl\n    __typename\n  }\n  displayName\n  info {\n    type\n    displayName\n    datasetNameDelimiter\n    logoUrl\n    __typename\n  }\n  __typename\n}\n\nfragment dataProductSearchFields on DataProduct {\n  urn\n  type\n  properties {\n    name\n    description\n    externalUrl\n    numAssets\n    __typename\n  }\n  ownership {\n    ...ownershipFields\n    __typename\n  }\n  tags {\n    ...globalTagsFields\n    __typename\n  }\n  glossaryTerms {\n    ...glossaryTerms\n    __typename\n  }\n  domain {\n    ...entityDomain\n    __typename\n  }\n  __typename\n}\n\nfragment schemaFieldEntityFields on SchemaFieldEntity {\n  urn\n  type\n  fieldPath\n  parent {\n    ...searchResultFields\n    __typename\n  }\n  __typename\n}\n\nfragment facetFields on FacetMetadata {\n  field\n  displayName\n  aggregations {\n    value\n    count\n    entity {\n      urn\n      type\n      ... on Tag {\n        name\n        properties {\n          name\n          colorHex\n          __typename\n        }\n        __typename\n      }\n      ... on GlossaryTerm {\n        name\n        properties {\n          name\n          __typename\n        }\n        parentNodes {\n          ...parentNodesFields\n          __typename\n        }\n        __typename\n      }\n      ... on DataPlatform {\n        ...platformFields\n        __typename\n      }\n      ... on DataPlatformInstance {\n        ...dataPlatformInstanceFields\n        __typename\n      }\n      ... on Domain {\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      ... on Container {\n        platform {\n          ...platformFields\n          __typename\n        }\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      ... on CorpUser {\n        username\n        properties {\n          displayName\n          fullName\n          __typename\n        }\n        editableProperties {\n          displayName\n          pictureLink\n          __typename\n        }\n        __typename\n      }\n      ... on CorpGroup {\n        name\n        properties {\n          displayName\n          __typename\n        }\n        __typename\n      }\n      ... on DataProduct {\n        properties {\n          name\n          __typename\n        }\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n',
  //     },
  //     {
  //       headers: {
  //         authority: "demo.datahubproject.io",
  //         accept: "*/*",
  //         "accept-language": "en-US,en;q=0.9",
  //         "content-type": "application/json",
  //         cookie:
  //           "bid=da83c943-dd00-4b9b-95eb-f279d3989f27; PLAY_SESSION=13d96bfdbab0717742dc498f0eb0cc9850790381-actor=urn%3Ali%3Acorpuser%3Adatahub&token=eyJhbGciOiJIUzI1NiJ9.eyJhY3RvclR5cGUiOiJVU0VSIiwiYWN0b3JJZCI6ImRhdGFodWIiLCJ0eXBlIjoiU0VTU0lPTiIsInZlcnNpb24iOiIxIiwianRpIjoiMTEwZjg1MzktOTY3OC00YzNjLWIwYTEtMGQzNWVjOWYxMTM4Iiwic3ViIjoiZGF0YWh1YiIsImV4cCI6MTY5MzQ4OTgyNCwiaXNzIjoiZGF0YWh1Yi1tZXRhZGF0YS1zZXJ2aWNlIn0.MgcFuVk-l0RWBrvU0Gov3XuHghkqIRolF1_1EXvNekU; actor=urn:li:corpuser:datahub",
  //         origin: "https://demo.datahubproject.io",
  //         referer:
  //           "https://demo.datahubproject.io/dataset/urn:li:dataset:(urn:li:dataPlatform:looker,datahub-demo.explore.datasets,PROD)/Lineage?filter_degree___false___EQUAL___0=1&is_lineage_mode=false&page=1&unionType=0",
  //         "sec-ch-ua":
  //           '"Chromium";v="116", "Not)A;Brand";v="24", "Google Chrome";v="116"',
  //         "sec-ch-ua-mobile": "?0",
  //         "sec-ch-ua-platform": '"Windows"',
  //         "sec-fetch-dest": "empty",
  //         "sec-fetch-mode": "cors",
  //         "sec-fetch-site": "same-origin",
  //         "user-agent":
  //           "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36",
  //       },
  //     }
  //   );

  console.log(response1.data, "this is response");
  return res.status(200).json({
    message: "Successfully fetched data",
    data: response1.data,
  });
});

module.exports = router;
